<cr-panel>
	<cr-panel-header>
		Results
		<ng-container *ngIf="focusedMatch">({{ visibleResults.length }} of {{ previews?.length }})</ng-container>
	</cr-panel-header>
	<cr-panel-actions>
		<cr-panel-action *ngIf="focusedMatch">
			<ng-container *ngTemplateOutlet="menu__show_results"></ng-container>
		</cr-panel-action>
		<cr-panel-action *ngIf="isMobile">
			<button mat-button
							[disabled]="!previews"
							(click)="isActive = !isActive">
				<mat-icon>{{ isActive ? 'arrow_downward' : 'arrow_upward' }}</mat-icon>
			</button>
		</cr-panel-action>
		<cr-panel-action *ngIf="!isMobile || isActive">
			<button mat-button
							[ngClass]="{ 'mat-stroked-button mat-warn': hiddenResults.length }"
							[disabled]="!previews"
							[matTooltip]="hiddenResults.length ? hiddenResults.length + ' results  are hidden' : 'Filter results'"
							(click)="openFilterDialog()">
				<mat-icon>filter_list</mat-icon>
			</button>
		</cr-panel-action>
	</cr-panel-actions>
	<cr-panel-body fxLayout="column"
								 fxFlex="100">
		<cr-plagiarism-free *ngIf="previews && previews.length === 0"></cr-plagiarism-free>
		<virtual-scroller *ngIf="previews"
											#scroll
											fxFlex
											[items]="previews | whitelist: 'id':focusedMatch?.ids">
			<cr-result-card *ngFor="let preview of scroll.viewPortItems"
											[preview]="preview"></cr-result-card>
		</virtual-scroller>
		<virtual-scroller *ngIf="!previews"
											#scroll
											fxFlex
											[items]="[1, 2, 3]">
			<cr-result-card *ngFor="let preview of scroll.viewPortItems"></cr-result-card>
		</virtual-scroller>
	</cr-panel-body>
</cr-panel>
<ng-template #menu__show_results>
	<button mat-button
					(click)="clearFocusedMatch()"
					matTooltip="Clear filter">
		<mat-icon>close</mat-icon>
	</button>
</ng-template>

<ng-template #skeleton__fakes>
	<cr-result-card></cr-result-card>
	<cr-result-card></cr-result-card>
	<cr-result-card></cr-result-card>
</ng-template>
